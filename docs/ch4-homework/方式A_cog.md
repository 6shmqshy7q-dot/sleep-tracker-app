# 认知模型 - 睡眠监测器

## 文档版本
- 版本号：v1.0
- 创建日期：2025-12-14
- 更新日期：2025-12-14
- 状态：草案

---

## 1. 认知模型概述

### 1.1 建模目的
本认知模型旨在通过识别和分析睡眠监测器产品中的核心认知实体，建立用户认知与产品功能的映射关系，支持产品设计和开发决策。

### 1.2 建模原则
- **用户中心性**：以用户认知为出发点
- **认知最小集**：识别最关键的认知实体
- **认知连续性**：保持实体间的认知连续性
- **认知一致性**：确保实体定义的一致性

### 1.3 实体识别标准
基于认知敏捷法，识别以下四个最重要的认知实体：
1. 用户认知实体
2. 睡眠数据记录认知实体
3. 订阅订单认知实体
4. 睡眠改善方案认知实体

---

## 2. 核心认知实体

### 2.1 用户认知实体 (User Entity)

#### 2.1.1 认知定义
用户是睡眠监测器的核心认知主体，是睡眠数据的生产者、报告的接收者和建议的执行者。

#### 2.1.2 核心属性

| 属性名称 | 数据类型 | 必填 | 认知意义 | 约束说明 |
|---------|---------|------|----------|----------|
| 用户ID | UUID | 是 | 唯一标识用户认知个体 | 系统生成，全局唯一 |
| 姓名 | String | 否 | 用户身份认知标识 | 可选填，支持昵称 |
| 年龄 | Integer | 是 | 睡眠模式的重要影响因素 | 范围：0-150岁 |
| 身高 | Float | 否 | 睡眠质量评估参考因素 | 单位：厘米 |
| 体重 | Float | 否 | 睡眠质量评估参考因素 | 单位：千克 |
| 设备型号 | String | 是 | 数据采集设备认知标识 | 必需用于数据关联 |

#### 2.1.3 认知关系
- **一对多关系**：一个用户 → 多个睡眠数据记录
- **一对多关系**：一个用户 → 多个订阅订单
- **一对多关系**：一个用户 → 多个睡眠改善方案

#### 2.1.4 认知行为
- **创建睡眠记录**：通过设备产生睡眠数据
- **查看睡眠报告**：消费睡眠分析结果
- **订阅服务**：购买付费功能
- **执行建议**：实施睡眠改善方案

#### 2.1.5 认知状态
- **活跃用户**：近期有睡眠数据记录
- **沉默用户**：注册但无睡眠数据
- **付费用户**：当前订阅有效
- **免费用户**：无有效订阅

---

### 2.2 睡眠数据记录认知实体 (Sleep Data Record Entity)

#### 2.2.1 认知定义
睡眠数据记录是用户睡眠行为的数字化映射，是生成睡眠报告和改善建议的基础数据源。

#### 2.2.2 核心属性

| 属性名称 | 数据类型 | 必填 | 认知意义 | 约束说明 |
|---------|---------|------|----------|----------|
| 记录ID | UUID | 是 | 唯一标识睡眠记录认知个体 | 系统生成，全局唯一 |
| 关联用户ID | UUID | 是 | 睡眠数据归属认知关系 | 外键，关联用户实体 |
| 睡眠时长 | Integer | 是 | 总睡眠时间认知量化 | 单位：分钟 |
| 浅睡时长 | Integer | 是 | 浅睡眠阶段时间认知量化 | 单位：分钟 |
| 深睡时长 | Integer | 是 | 深睡眠阶段时间认知量化 | 单位：分钟 |
| REM周期时长 | Integer | 是 | REM睡眠阶段时间认知量化 | 单位：分钟 |
| 入睡时间 | DateTime | 是 | 睡眠开始时间认知记录 | 精确到分钟 |
| 醒来时间 | DateTime | 是 | 睡眠结束时间认知记录 | 精确到分钟 |
| 睡眠评分 | Float | 否 | 睡眠质量综合认知评估 | 范围：0-100分 |

#### 2.2.3 认知关系
- **多对一关系**：多个睡眠记录 → 一个用户
- **一对多关系**：一个睡眠记录 → 一个睡眠改善方案（可选）

#### 2.2.4 认知行为
- **数据采集**：通过设备传感器获取
- **数据存储**：保存到本地数据库
- **数据计算**：基于模型计算睡眠指标
- **报告生成**：用于生成睡眠分析报告

#### 2.2.5 认知状态
- **有效记录**：数据完整，可用于分析
- **异常记录**：数据缺失或异常
- **已分析**：已生成睡眠报告
- **待分析**：待处理的原始数据

---

### 2.3 订阅订单认知实体 (Subscription Order Entity)

#### 2.3.1 认知定义
订阅订单是用户与产品之间的商业关系认知载体，定义了用户可使用的功能范围和服务期限。

#### 2.3.2 核心属性

| 属性名称 | 数据类型 | 必填 | 认知意义 | 约束说明 |
|---------|---------|------|----------|----------|
| 订单ID | UUID | 是 | 唯一标识订阅订单认知个体 | 系统生成，全局唯一 |
| 关联用户ID | UUID | 是 | 订单归属认知关系 | 外键，关联用户实体 |
| 订阅类型 | Enum | 是 | 服务类型认知分类 | 免费/日付/月付/年付 |
| 支付金额 | Decimal | 否 | 付费金额认知记录 | 单位：元，支持0元 |
| 生效时间 | DateTime | 是 | 服务开始时间认知边界 | 订阅生效时间点 |
| 到期时间 | DateTime | 否 | 服务结束时间认知边界 | 付费订阅特有 |
| 是否自动续费 | Boolean | 否 | 续费认知偏好 | 付费订阅特有 |

#### 2.3.3 认知关系
- **多对一关系**：多个订单 → 一个用户
- **时序关系**：订单间存在时间上的先后关系

#### 2.3.4 认知行为
- **创建订单**：用户发起订阅请求
- **支付处理**：完成付费流程
- **服务提供**：根据订阅类型提供功能
- **自动续费**：按约定周期自动扣费

#### 2.3.5 认知状态
- **待支付**：订单创建但未完成支付
- **生效**：订阅服务当前有效
- **已到期**：订阅服务已过期
- **已取消**：用户主动取消订阅

---

### 2.4 睡眠改善方案认知实体 (Sleep Improvement Plan Entity)

#### 2.4.1 认知定义
睡眠改善方案是基于睡眠数据分析生成的个性化建议载体，是产品价值实现的关键认知实体。

#### 2.4.2 核心属性

| 属性名称 | 数据类型 | 必填 | 认知意义 | 约束说明 |
|---------|---------|------|----------|----------|
| 方案ID | UUID | 是 | 唯一标识改善方案认知个体 | 系统生成，全局唯一 |
| 关联用户ID | UUID | 是 | 方案归属认知关系 | 外键，关联用户实体 |
| 关联睡眠记录ID | UUID | 否 | 方案生成依据认知关系 | 外键，关联睡眠记录实体 |
| 建议类型 | Enum | 是 | 改善方向认知分类 | 作息调整/环境优化/饮食建议 |
| 建议内容 | Text | 是 | 具体建议文本认知描述 | 详细的改善指导 |
| 生成时间 | DateTime | 是 | 方案创建时间认知记录 | 精确到分钟 |

#### 2.4.3 认知关系
- **多对一关系**：多个方案 → 一个用户
- **多对一关系**：多个方案 → 一个睡眠记录（可选）
- **时序关系**：方案基于历史数据生成

#### 2.4.4 认知行为
- **方案生成**：基于睡眠数据自动生成
- **方案展示**：向用户展示改善建议
- **方案执行**：用户按照建议执行
- **效果追踪**：基于后续数据评估效果

#### 2.4.5 认知状态
- **已生成**：方案已创建待查看
- **已查看**：用户已阅读方案内容
- **已执行**：用户开始执行建议
- **已完成**：建议执行周期结束

---

## 3. 认知实体关系图

```
用户 (User)
├── 睡眠数据记录 (Sleep Data Record) *
├── 订阅订单 (Subscription Order) *
└── 睡眠改善方案 (Sleep Improvement Plan) *

睡眠数据记录 (Sleep Data Record)
└── 睡眠改善方案 (Sleep Improvement Plan) *
```

### 3.1 关系说明
- **一对多关系**：`*` 表示一对多关系中的"多"方
- **可选关系**：虚线表示可选的关联关系
- **强制关系**：实线表示强制的关联关系

---

## 4. 认知模型约束

### 4.1 数据完整性约束
- 用户必须关联至少一个设备型号才能生成有效睡眠记录
- 睡眠数据记录的所有时长字段总和不能超过24小时
- 订阅订单的生效时间不能晚于到期时间

### 4.2 业务逻辑约束
- 免费用户不能生成睡眠改善方案
- 订阅订单到期后，用户降级为免费版功能
- 睡眠改善方案必须基于有效的睡眠数据记录生成

### 4.3 认知一致性约束
- 同一用户的睡眠改善方案应体现个性化差异
- 睡眠评分应基于科学模型计算，确保认知合理性
- 建议内容应与用户实际睡眠数据相符

---

## 5. 认知模型演进

### 5.1 模型扩展性
当前模型识别了4个核心认知实体，未来可根据产品发展需要扩展：
- 设备实体：详细记录设备信息和兼容性
- 睡眠目标实体：用户设定的睡眠改善目标
- 社交分享实体：用户间睡眠数据分享功能

### 5.2 模型优化方向
- **认知精度提升**：增加更细粒度的睡眠阶段数据
- **认知广度扩展**：整合更多健康相关数据维度
- **认知深度增强**：提供更个性化的分析和建议

---

## 6. 文档维护

### 6.1 更新记录
- v1.0 (2025-12-14)：初始版本，定义4个核心认知实体

### 6.2 相关文档
- 《现实约束 - 睡眠监测器》
- 《规约书 - 睡眠监测器》
- 《数据模型设计文档》
- 《业务流程文档》

### 6.3 审批记录
- 产品负责人：待审批
- 用户体验负责人：待审批
- 技术负责人：待审批
- 数据架构师：待审批
